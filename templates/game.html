{% extends "layout.html" %}
{% block styles %}
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='index.css') }}"/>
    <link rel="stylesheet" type="text/css" href="/static/unslider.css"/>
    <style>
        div.unslider {
            overflow: hidden;
            float: left;
            width: 75%;

        }

        .feature-row div.item {
            display: block;
            clear: both;
            float: right;
            position: static;
            width: 100%;
        }
        div.fav-prev.thumbnail{
            padding: 2.5mm;
            margin-bottom: 2.5mm;
        }
        div.fav-prev.thumbnail:last-of-type{
            padding: 2.5mm;
            margin-bottom: 0;
        }
    </style>
{% endblock %}
{% block scripts %}
    <script src="{{ url_for('static', filename='unslider-min.js') }}"></script>
    <script language="javascript">
        $(document).ready(function () {
            $(window).on('resize', function () {
                $('.slide-box').aspectratio(0);
            });

            $('#fav-slider').unslider({
                autoplay: true,
                arrows: false,
                nav: false,
                speed: 750,
                delay: 8000
            });
             $('.slide-box').aspectratio(0);

            //table list switcher
            $(".listheaditem").click(function(el,index){
                $(".listheadactive").removeClass("listheadactive");
               $(this).addClass("listheadactive");
                var il = $(this).attr("data-list");
                $(".listbody").hide();
                $("." + il + "list").show();
                $(".listthumb").aspectratio(0);

            });

        });
    </script>
{% endblock %}
{% block body %}
    <!--
<div class="header">
    <div class="vert-text">
        {% if not user %}
        <h3>Welcome to {{ site_name }}!</h3>
        <p>Hosting {{ mod_count }} mods for {{ "{:,}".format(user_count) }} users!</p>
        <a data-scroll class="btn btn-circle" href="#about"><span class="glyphicon glyphicon-chevron-down"></span></a>
        {% else %}
        <h3>Welcome back, {{ user.username }}!</h3>
        <p>We have {{ mod_count }} mods for you and {{ "{:,}".format(user_count - 1) }} other users!</p>
        {% endif %}
    </div>
</div>
-->
<div class="row">
    {% if user %}
        <div class="row feature-row" style="float: right; margin-left: .75%;margin-right: .75%;margin-top: 0;margin-bottom:0;display: block;width: 23.5%;">
            {% for feature in featured[:9] %}
                {% set mod = feature.mod %}
                <div class="fav-prev thumbnail">{{ mod.name }}</div>
            {% endfor %}
        </div>
    {% else %}
        <div class="row feature-row" style="float: right; margin-left: .75%;margin-right: .75%;margin-top: 0;margin-bottom:0;display: block;width: 23.5%;">
            {% for feature in featured[:9] %}
                {% set mod = feature.mod %}
                <div class="fav-prev thumbnail" >{{ mod.name }}</div>
            {% endfor %}
        </div>
    {% endif %}

    <div id="fav-slider" class="" style="">
        <ul>
            {% for feature in featured[:8] %}
                {% set mod = feature.mod %}
                {% include "modbox-slide.html" %}
            {% endfor %}

        </ul>
    </div>
    </div>
    <!--
<div class="well"  style="margin-bottom: 0;">
    <div class="container main-cat">
        <a href="{% if ga %}/{{ ga.short }}{% endif %}/browse/featured" class="btn btn-primary pull-right">
            Browse Featured Mods
            <span class="glyphicon glyphicon-chevron-right"></span>
        </a>
        <h3>Featured Mods <small>Hand-picked by {{ site_name }} admins</small></h3>
    </div>
</div>
-->

    {% if user and len(yours) >= 3 %}
        <div class="well" style="margin-bottom: 0;">
            <div class="container">
                <a href="/profile/{{ user.username }}" class="btn btn-primary pull-right">
                    Your Profile
                    <span class="glyphicon glyphicon-chevron-right"></span>
                </a>
                <h1>Your Mods
                    <small>Recently updated mods you follow</small>
                </h1>
            </div>
        </div>
        <div class="container">
            <div class="row">
                {% for mod in yours %}
                    {% include "mod-box.html" %}
                {% endfor %}
            </div>
        </div>
    {% endif %}


<style>
.listview{
    width: 50%;
    margin: 2.5mm;
}
.listhead{
    width: 100%;
    display: inline-box;
    clear: both;
    font-size: 5mm;
    color: #07acd2;
}
.listheaditem{
    display: inline-block;
    width: 33.33%;
    text-align: center;
    border-bottom: solid .5mm #07acd2;
    cursor: pointer;
}
.listheadactive{
    border-bottom: none;
    border-left: solid .5mm #07acd2;
    border-top: solid .5mm #07acd2;
    border-right: solid .5mm #07acd2;
}
.listbody{
    border-bottom: solid .5mm #07acd2;
    border-right: solid .5mm #07acd2;
    border-left: solid .5mm #07acd2;
}
.listentry{
   width: 100%;
}
.listthumb{
    width: 33.33%;
    display: inline-block;
    min-heigth: 1cm;
    margin: 2.5mm;
}
.listitemtext{
    display: inline-block;
    max-width: 60%;
    vertical-align: top;
}
.newlist{
    display: block;
}
.updatelist{
    display: none;
}
.popularlist{
    display: none;
}
.morerow{
    width: 100%;
    padding: 2.5mm;
    text-align: right;
}
</style>
    <div class="listview">
    <div class="listhead"><div data-list="new" class="listheaditem listheadactive">New</div><div data-list="update" class="listheaditem">Updated</div><div data-list="popular" class="listheaditem">Popular</div></div>
    <div class="listbody newlist">
        {% for mod in new %}
        <a href="{{ url_for("mods.mod", id=mod.id, mod_name=mod.name) }}"><div class="listentry">
            <div class="listthumb" style="{% if not mod.background %}
                            background-image: url(/static/background-s.jpg);
                        {% else %}
                            background-image: url({{ mod.background_thumb() }});
                        {% endif %}">

            </div>
            <div class="listitemtext">
                    <h4 style="color:#333333;">{{ mod.name }}</h4>
                    <span class="ms-author" style="color: #337AB7;">by somename</span>
                    <span class="ms-version" style="color: #337AB7;">for&nbsp;{{ mod.default_version().gameversion.friendly_version }}</span>
                    <p style="color: #296394;">{{ mod.short_description }}</p>
            </div>
        </div></a>
        {% endfor %}
        <div class="morerow">
            <a href="{% if ga %}/{{ ga.short }}{% endif %}/browse/new" class="btn btn-primary">
                Browse {{ mod_count }} more Mods
                <span class="glyphicon glyphicon-chevron-right"></span>
            </a>
        </div>
    </div>
    <div class="listbody updatelist">
        {% for  mod in recent %}
        <a href="{{ url_for("mods.mod", id=mod.id, mod_name=mod.name) }}"><div class="listentry">
            <div class="listthumb" style="{% if not mod.background %}
                            background-image: url(/static/background-s.jpg);
                        {% else %}
                            background-image: url({{ mod.background_thumb() }});
                        {% endif %}">

            </div>
            <div class="listitemtext">
                    <h4 style="color:#333333;">{{ mod.name }}</h4>
                    <span class="ms-author" style="color: #337AB7;">by somename</span>
                    <span class="ms-version" style="color: #337AB7;">for&nbsp;{{ mod.default_version().gameversion.friendly_version }}</span>
                    <p style="color: #296394;">{{ mod.short_description }}</p>
            </div>
        </div></a>
        {% endfor %}
        <div class="morerow">
            <a href="{% if ga %}/{{ ga.short }}{% endif %}/browse/updated" class="btn btn-primary">
                Browse {{ mod_count }} more Mods
                <span class="glyphicon glyphicon-chevron-right"></span>
            </a>
        </div>

    </div>
    <div class="listbody popularlist">
        {% for mod in top %}
        <a href="{{ url_for("mods.mod", id=mod.id, mod_name=mod.name) }}"><div class="listentry">
            <div class="listthumb" style="{% if not mod.background %}
                            background-image: url(/static/background-s.jpg);
                        {% else %}
                            background-image: url({{ mod.background_thumb() }});
                        {% endif %}">

            </div>
            <div class="listitemtext">
                    <h4 style="color:#333333;">{{ mod.name }}</h4>
                    <span class="ms-author" style="color: #337AB7;">by somename</span>
                    <span class="ms-version" style="color: #337AB7;">for&nbsp;{{ mod.default_version().gameversion.friendly_version }}</span>
                    <p style="color: #296394;">{{ mod.short_description }}</p>
            </div>
        </div></a>
        {% endfor %}
        <div class="morerow">
            <a href="{% if ga %}/{{ ga.short }}{% endif %}/browse/top" class="btn btn-primary">
                Browse {{ mod_count }} more Mods
                <span class="glyphicon glyphicon-chevron-right"></span>
            </a>
        </div>
    </div>
    </div>


    <!-- {{ mod_count }} -->


{% endblock %}

